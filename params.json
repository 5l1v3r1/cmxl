{"name":"Cmxl","tagline":"your friendly MT940 bank statement parser","body":"# Cmxl - your friendly ruby MT940 parser\r\n\r\nAt [Railslove](http://railslove.com) we build a lot of financial applications and work on integrating applications with banks and banking functionality. \r\nOur goal is to make simple solutions for what often looks complicated.\r\n\r\nCmxl is a friendly and extendible MT940 bank statement file parser that helps your extracting data from the bank statement files. \r\n\r\n## What is MT940?\r\n\r\nMT940 (MT = Message Type) is the SWIFT-Standard for the electronic transfer of bank statement files. \r\nWhen integrating with banks you often get MT940 files as interface. \r\nFor more information have a look at the different [SWIFT message types](http://en.wikipedia.org/wiki/SWIFT_message_types)\r\n\r\nAt some point in the future MT940 file should be exchanged with newer XML documents - but banking institutions are slow so MT940 will stick around for a while.\r\n\r\n## Reqirements\r\n\r\nCmxl is a pure ruby parser and has no dependency on native extensions. \r\n\r\n* Ruby 1.9.3 or newer (jruby, etc.)\r\n\r\n## Installation\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n    gem 'cmxl'\r\n\r\nAnd then execute:\r\n\r\n    $ bundle\r\n\r\nOr install it yourself as:\r\n\r\n    $ gem install cmxl\r\n\r\n## Usage\r\n\r\nSimple usage: \r\n\r\n```ruby\r\n\r\n# Configuration:\r\n# Cmxl currently allows you to configure the statement divider - though the default should be good in most of the cases\r\n# and you can configure if line parsing errors should be raised\r\n\r\nCmxl.config[:statement_separator] = /\\n-.\\n/m\r\nCmxl.config[:raise_line_format_errors] = true\r\n\r\n# Statment parsing:\r\n\r\nstatements = Cmxl.parse(File.read('mt940.txt'), :encoding => 'ISO-8859-1') # parses the file and returns an array of statement objects. Please note: if no encoding is given Cmxl tries to guess the encoding from the content and converts it to UTF-8. \r\nstatements.each do |s|\r\n  puts s.reference\r\n  puts s.generation_date\r\n  puts s.opening_balance.amount\r\n  puts s.closing_balance.amount\r\n  puts.sha # SHA of the statement source - could be used as an unique identifier\r\n  \r\n  s.transactions.each do |t|\r\n    puts t.information\r\n    puts t.description\r\n    puts t.entry_date\r\n    puts t.funds_code\r\n    puts t.credit?\r\n    puts t.debit?\r\n    puts t.sign # -1 if it's a debit; 1 if it's a credit\r\n    puts t.name\r\n    puts t.iban\r\n    puts t.sepa\r\n    puts t.sub_fields\r\n    puts t.reference\r\n    puts t.bank_reference\r\n    # ...\r\n  end\r\nend\r\n\r\n```\r\n\r\nEvery object responds to `to_h` and let's you easily convert the data to a hash. Also every object responds to `to_json` which lets you easily represent the statements as JSON with your favorit JSON library.\r\n\r\n#### A note about encoding and file wirednesses\r\n\r\nYou probably will encounter encoding issues (hey, you are building banking applications!). \r\nWe try to handle encoding and format wirednesses as much as possible. If no encoding is passed we try to guess the encoding of the data and convert it to UTF8. \r\nIn the likely case that you encouter encoding issues you can pass encoding options to the `Cmxl.parse(<string>, <options hash>)` it accepts the same options as [String#encode](http://ruby-doc.org/core-2.1.3/String.html#method-i-encode) \r\nIf that fails try to motify the file before you pass it to the parser - and please create an issue.\r\n\r\n### Custom field parsers\r\n\r\nBecause a lot of banks implement the MT940 format slightly different one of the design goals of this library is to be able to customize the individual field parsers. \r\nEvery line get parsed with a special parser. Here is how to write your own parser:\r\n\r\n```ruby\r\n\r\n# simply create a new parser class inheriting from Cmxl::Field\r\nclass MyFieldParser < Cmxl::Field\r\n  self.tag = 42 # define which MT940 tag your parser can handle. This will automatically register your parser and overwriting existing parsers\r\n  self.parser = /(?<world>.*)/ # the regex to parse the line. Use named regexp to access your match.\r\n\r\n  def upcased\r\n    self.data['world'].upcase\r\n  end\r\nend\r\n\r\nmy_field_parser = MyFieldParser.parse(\":42:hello from mt940\")\r\nmy_field_parser.world #=> hello from MT940\r\nmy_field_parser.upcased #=> HELLO FROM MT940\r\nmy_field_parser.data #=> {'world' => 'hello from mt940'} - data is the accessor to the regexp matches\r\n\r\n```\r\n\r\n## Parsing issues? - please create an issue with your file\r\n\r\nThe Mt940 format often looks different for the different banks and the different countries. Especially the not strict defined fields are often used for custom bank data. \r\nIf you have a file that can not be parsed please open an issue. We hope to build a parser that handles most of the files.\r\n\r\n\r\n## ToDo\r\n\r\n* collect MT940 files from different banks and use them as example for specs\r\n\r\n\r\n## Contributing\r\n\r\nAutomated tests: We use rspec to test Cmxl. Simplt run `rake` to execute the whole test suite.\r\n\r\n1. Fork it ( http://github.com/railslove/cmxl/fork )\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Add some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. Create new Pull Request\r\n\r\n## Credits and other parsers\r\n\r\nCmxl is inspired and borrows ideas from the `mt940_parser` by the great people at [betterplace](https://www.betterplace.org/).\r\n\r\nother parsers:\r\n* [betterplace/mt940_parser](https://github.com/betterplace/mt940_parser)\r\n* [gmitrev/mt940parser](https://github.com/gmitrev/mt940parser)\r\n\r\n## Stats\r\n\r\n[![Build Status](https://travis-ci.org/railslove/cmxl.svg)](https://travis-ci.org/railslove/cmxl)\r\n[![Code Climate](https://codeclimate.com/github/railslove/cmxl/badges/gpa.svg)](https://codeclimate.com/github/railslove/cmxl)\r\n[![Test Coverage](https://codeclimate.com/github/railslove/cmxl/badges/coverage.svg)](https://codeclimate.com/github/railslove/cmxl)\r\n[![Gem Version](https://badge.fury.io/rb/cmxl.svg)](http://badge.fury.io/rb/cmxl)\r\n\r\n------------\r\n\r\n2014 - built with love by [Railslove](http://railslove.com) and released under the MIT-Licence. We have built quite a number of FinTech products. If you need support we are happy to help. Please contact us at team@railslove.com.\r\n","google":"UA-3621621-23","note":"Don't delete this file! It's used internally to help with page regeneration."}